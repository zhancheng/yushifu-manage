import{d as E,r as c,F as h,y as k,z as x,C as a,D as o,G as F,H as r,I as C,J as I,K as _,L as A,E as B,A as f,M as K,N as g,q as N,_ as q}from"#entry";import{u as T}from"./Dte0BtBY.js";import{u as L}from"./B3RAIxuh.js";const M={class:"login-container"},R=E({__name:"login",setup(S){const i=L(),w=T(),t=c(),n=c(!1),s=h({username:"",password:""}),y={username:[{required:!0,message:"请输入账号",trigger:"blur"}],password:[{required:!0,message:"请输入密码",trigger:"blur"},{min:6,message:"密码至少6位",trigger:"blur"}]},l=async()=>{t.value&&await t.value.validate(async m=>{if(m){n.value=!0;try{const e=await w.post("/admin/login",s);i.setToken(e.data.access_token),i.setAdminInfo(e.data.admin),g.success("登录成功"),await N("/dashboard/records")}catch(e){g.error(e.response?.data?.message||"登录失败")}finally{n.value=!1}}})};return(m,e)=>{const p=I,d=C,v=A,V=F,b=K;return x(),k("div",M,[a(b,{class:"login-card"},{header:o(()=>[...e[2]||(e[2]=[f("div",{class:"card-header"},[f("span",null,"管理后台登录")],-1)])]),default:o(()=>[a(V,{ref_key:"loginFormRef",ref:t,model:r(s),rules:y,"label-width":"80px"},{default:o(()=>[a(d,{label:"账号",prop:"username"},{default:o(()=>[a(p,{modelValue:r(s).username,"onUpdate:modelValue":e[0]||(e[0]=u=>r(s).username=u),placeholder:"请输入管理员账号",onKeyup:_(l,["enter"])},null,8,["modelValue"])]),_:1}),a(d,{label:"密码",prop:"password"},{default:o(()=>[a(p,{modelValue:r(s).password,"onUpdate:modelValue":e[1]||(e[1]=u=>r(s).password=u),type:"password",placeholder:"请输入密码","show-password":"",onKeyup:_(l,["enter"])},null,8,["modelValue"])]),_:1}),a(d,null,{default:o(()=>[a(v,{type:"primary",loading:r(n),style:{width:"100%"},onClick:l},{default:o(()=>[...e[3]||(e[3]=[B(" 登录 ",-1)])]),_:1},8,["loading"])]),_:1})]),_:1},8,["model"])]),_:1})])}}}),G=q(R,[["__scopeId","data-v-2c06f9a3"]]);export{G as default};
